{% extends "circle/layout.html" %}
{% load static %}
{% block body %}
    <h1>
        Write a Story
    </h1>
    <h3>Start a new circle by choosing a title</h3>
    <div id="alert-holder"></div>
    <div class="alert alert-warning alert-dismissible fade show" id="alert-template" role="alert" style="display: none;">
        <span id="alert-text">Placeholder Alert text</span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <div class="input-div">
        <input id="title-input" type="text" size="20">
        <button id="title-submit" type="button">Begin</button><br>
    </div>
    <h4>Options</h4>
    <div class="input-div">
        <label for="threshold-user-ct">Minimum # of users to start</label>
        <input id="threshold-user-ct-input" type="number" name="threshold-user-ct" min="2" max="100" value="2"><br>
        <label for="max-user-ct">Max # of users in circle</label>
        <input id="max-user-ct-input" type="number" name="max-user-ct" min ="2" max="100" value="4">
    </div>
    <h3>Stories Waiting for Authors to Start</h3>
    <table>
        <tr>
            <th>Title</th>
            <th>Current Users</th>
            <th>Waiting For</th>
        </tr>
        {% for circle in waiting_circles %}
        <tr>
            <td><a href="{{ circle.story.get_absolute_url }}">{{ circle.story.title }}</a></td>
            <td>{{ circle.user_ct }}</td>
            <td>{{ circle.users_needed}}</td>
        </tr>
        {% endfor %}
    </table>
    <h3>Stories in Progress Accepting More Authors</h3>
    <table>
        <tr>
            <th>Title</th>
            <th>Current Users</th>
            <th>Max Users</th>
        </tr>
        {% for circle in open_circles %}
        <tr>
            <td><a href="{{ circle.story.get_absolute_url }}">{{ circle.story.title }}</a></td>
            <td>{{ circle.user_ct }}</td>
            <td>{{ circle.max_user_ct }}</td>
        </tr>
        {% endfor %}
    </table>


{% endblock %}
{% block script %}
    <script src="{% static 'circle/general.js' %}"></script>
    <script src="{% static 'circle/index.js' %}"></script>
{% endblock %}
